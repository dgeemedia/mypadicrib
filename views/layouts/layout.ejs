<!doctype html>
<html lang="en">
  <head>
    <%- include('../partials/head') %>
  </head>

  <body>
    <!-- Accessibility: skip to content -->
    <a class="skip-link" href="#main" style="position:absolute;left:-9999px;top:auto;overflow:hidden">Skip to content</a>

    <!-- Top navigation / header -->
    <%- include('../partials/header') %>

    <!-- Mobile drawer (kept directly after header so the drawer DOM exists for the header button) -->
    <%- include('../partials/mobile-drawer') %>

    <!-- Main content area -->
    <main id="main" class="container" role="main" aria-live="polite">
      <%- include('../partials/flash') %>
      <%- body %>
    </main>

    <!-- Footer -->
    <%- include('../partials/footer') %>

  <script>
  // output raw JSON so EJS doesn't html-escape characters (no &amp; etc)
  window.APP_USER = <%- JSON.stringify(user ? { id: user.id, name: user.name, role: user.role } : null) %>;
  window.APP_CONFIG = { MAX_IMAGE_MB: <%- JSON.stringify(process.env.MAX_IMAGE_MB || 5) %> };
  </script>

    <!-- Client scripts -->
    <script src="/js/main.js" defer></script>
  </body>
</html>
